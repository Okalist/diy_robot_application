# diy_robot_application

## thematical Classification

This is the final Readme of our whole series documenting the ROS-Integration for our 6 axis DIY-robot (designed by LOBOCNC) with our parallel gripper.
All the other repos you should have looked at before using the software provided inside of this repo are included here as dependencies inside of this docker container and make the whole ROS-integration work.
For a general overwiew please refer to the main ROS-repo of our project: https://github.com/mathias31415/diy_robotics/tree/main/ROS-Packages
It's also highly recommended to read the other linked package-repos to understand how ROS is working and how you affect ROS when you program your own robotics application inside this package.

For clarity reasons al the needed dependencies are not located inside your main ROS-workspace. This graphic was shown in the main repo already, but it explains the structure inside the docker container you will use inside this tutorial very well:

![container_structure](../images/container_structure.png)

## Package Structure

![application_files](../images/application_files.png)

This package has the build type ````ament_python```` so it allows you to program in Python and execute these scripts from the command line of your terminal.
It contains the following folders/ files:

- images and README.md are only for documentation purposes
- log, run.sh, Dockerfile and dds_profile.xml handle the build of your docker container the whole ROS-integration is running in.
- resource, test, setup.cfg and package.xml were autogenerated when we creted the application package and not recommendet to modify
- src/diy_robot_application: this is the folder conteining the applications itself
- setup.py: this was also autogenerated when we created the package but you need to modify this file as mentioned below to enter your applications from the command line

This package is designed as an development-package. We will work with the ````src```` folder on our dev-machine mounted directly to the container. This gives you the opportunity to develop your applications on your dev-machine (for example with VS-Code) and execute them inside od the conteiner withour re-building it.
We will come back later to this point.

## HowTo: Your first robot application:

### Set up the Workspace:
1) download/ clone this repo to your dev-machine
2) open VS-Code or any other IDE and add the ````src```` folder to your workspace
3) open a terimial (Terminator ist highly recommended)
4) navigate to the folder you cloned the repo in from step 1 (using cd <path> and ls to view content)
5) build the container by sourcing the run-script ````./run.sh```` Note: working wifi connection is required because the dependencie packages will now be cloned directly in your container from GitHub.

Now you should be inside your docker container:
![inside_conteiner(../images/inside_conteiner.png)

### Set up the Application in Simulation (use_fake_hardware:=true) and execute the provided example.py:
1) build your workspace inside of the container ````colcon build````
2) source your workspace ````source install/setup.bash````
3) launch all required nodes to make the whole integration work by typing the following line in your terminal ````ros2 launch diy_robot_wer24_moveit complete.launch.py````
   In this case we don't pass launch arguments because we want to use the defaults.

Now the Rviz window with MoveIt included should have started:
![moveit_screen](../images/moveit_screen.png)

Now you can move the robot arond and perform motion planning tasks by pressing the Plan& Execute button on the lower lefthand side.
Feel free to try all functionalities Rviz already provides.

4) open another terminal (when you use terminator you can just press Ctrl + Shift + e)
5) connect the new terminal to the one already running with ````docker ecex -it diy_robot_application bash````
6) switch back to VS-Code on your dev-machine and open your application file, for example ````example.py````
7) make sure that the argument ```robot = RobotClient(is_simulation=False)``` is passed when you work with fake hardware (if this is not passed MoveIt trys to connect to the gripper hardware and fails)
8) make sure the code you want to execute is placed inside the main-loop
9) switch back to the docker container (second terminal)
10) build and source your workspace
11) execute the example.py by typing the following line in your terminal ````ros2 run diy_robot_application example````

Now you should see the robot move in Rviz (Note: gripper movements will not be displayed for simplicity reasons)

## Write your own Application File:





